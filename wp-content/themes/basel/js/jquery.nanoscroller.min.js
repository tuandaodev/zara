!function(t){"function"==typeof define&&define.amd?define(["jquery"],function(e){return t(e,window,document)}):"object"==typeof exports?module.exports=t(require("jquery"),window,document):t(jQuery,window,document)}(function(t,e,i){"use strict";var s,o,n,l,r,h,c,a,p,d,u,g,v,f,S,m,T,y,b,w,x,$,C,H,O,A,E;w={paneClass:"nano-pane",sliderClass:"nano-slider",contentClass:"nano-content",enabledClass:"has-scrollbar",flashedClass:"flashed",activeClass:"active",iOSNativeScrolling:!1,preventPageScrolling:!1,disableResize:!1,alwaysVisible:!1,flashDelay:1500,sliderMinHeight:20,sliderMaxHeight:null,documentContext:null,windowContext:null},S="scroll",c="mousedown",a="mouseenter",p="mousemove",u="mousewheel",d="mouseup",f="resize",r="drag",h="enter",T="up",v="panedown",n="DOMMouseScroll",l="down",y="wheel",m="touchmove",s="Microsoft Internet Explorer"===e.navigator.appName&&/msie 7./i.test(e.navigator.appVersion)&&e.ActiveXObject,o=null,H=e.requestAnimationFrame,b=e.cancelAnimationFrame,A=i.createElement("div").style,E=function(){var t,e,i,s;for(t=i=0,s=(e=["t","webkitT","MozT","msT","OT"]).length;i<s;t=++i)if(e[t],e[t]+"ransform"in A)return e[t].substr(0,e[t].length-1);return!1}(),O=function(t){return!1!==E&&(""===E?t:E+t.charAt(0).toUpperCase()+t.substr(1))}("transform"),$=!1!==O,x=function(){var t,e,s;return(e=(t=i.createElement("div")).style).position="absolute",e.width="100px",e.height="100px",e.overflow=S,e.top="-9999px",i.body.appendChild(t),s=t.offsetWidth-t.clientWidth,i.body.removeChild(t),s},C=function(){var t,i,s;return i=e.navigator.userAgent,!!(t=/(?=.+Mac OS X)(?=.+Firefox)/.test(i))&&((s=/Firefox\/\d{2}\./.exec(i))&&(s=s[0].replace(/\D+/g,"")),t&&+s>23)},g=function(){function g(s,n){this.el=s,this.options=n,o||(o=x()),this.$el=t(this.el),this.doc=t(this.options.documentContext||i),this.win=t(this.options.windowContext||e),this.body=this.doc.find("body"),this.$content=this.$el.children("."+this.options.contentClass),this.$content.attr("tabindex",this.options.tabIndex||0),this.content=this.$content[0],this.previousPosition=0,this.options.iOSNativeScrolling&&null!=this.el.style.WebkitOverflowScrolling?this.nativeScrolling():this.generate(),this.createEvents(),this.addEvents(),this.reset()}return g.prototype.preventScrolling=function(t,e){if(this.isActive)if(t.type===n)(e===l&&t.originalEvent.detail>0||e===T&&t.originalEvent.detail<0)&&t.preventDefault();else if(t.type===u){if(!t.originalEvent||!t.originalEvent.wheelDelta)return;(e===l&&t.originalEvent.wheelDelta<0||e===T&&t.originalEvent.wheelDelta>0)&&t.preventDefault()}},g.prototype.nativeScrolling=function(){this.$content.css({WebkitOverflowScrolling:"touch"}),this.iOSNativeScrolling=!0,this.isActive=!0},g.prototype.updateScrollValues=function(){var t,e;t=this.content,this.maxScrollTop=t.scrollHeight-t.clientHeight,this.prevScrollTop=this.contentScrollTop||0,this.contentScrollTop=t.scrollTop,e=this.contentScrollTop>this.previousPosition?"down":this.contentScrollTop<this.previousPosition?"up":"same",this.previousPosition=this.contentScrollTop,"same"!==e&&this.$el.trigger("update",{position:this.contentScrollTop,maximum:this.maxScrollTop,direction:e}),this.iOSNativeScrolling||(this.maxSliderTop=this.paneHeight-this.sliderHeight,this.sliderTop=0===this.maxScrollTop?0:this.contentScrollTop*this.maxSliderTop/this.maxScrollTop)},g.prototype.setOnScrollStyles=function(){var t,e;$?(t={})[O]="translate(0, "+this.sliderTop+"px)":t={top:this.sliderTop},H?(b&&this.scrollRAF&&b(this.scrollRAF),this.scrollRAF=H((e=this,function(){return e.scrollRAF=null,e.slider.css(t)}))):this.slider.css(t)},g.prototype.createEvents=function(){var t,e,i,s,o,n,c,u;this.events={down:(u=this,function(t){return u.isBeingDragged=!0,u.offsetY=t.pageY-u.slider.offset().top,u.slider.is(t.target)||(u.offsetY=0),u.pane.addClass(u.options.activeClass),u.doc.bind(p,u.events[r]).bind(d,u.events.up),u.body.bind(a,u.events[h]),!1}),drag:(c=this,function(t){return c.sliderY=t.pageY-c.$el.offset().top-c.paneTop-(c.offsetY||.5*c.sliderHeight),c.scroll(),c.contentScrollTop>=c.maxScrollTop&&c.prevScrollTop!==c.maxScrollTop?c.$el.trigger("scrollend"):0===c.contentScrollTop&&0!==c.prevScrollTop&&c.$el.trigger("scrolltop"),!1}),up:(n=this,function(t){return n.isBeingDragged=!1,n.pane.removeClass(n.options.activeClass),n.doc.unbind(p,n.events[r]).unbind(d,n.events.up),n.body.unbind(a,n.events[h]),!1}),resize:(o=this,function(t){o.reset()}),panedown:(s=this,function(t){return s.sliderY=(t.offsetY||t.originalEvent.layerY)-.5*s.sliderHeight,s.scroll(),s.events.down(t),!1}),scroll:(i=this,function(t){i.updateScrollValues(),i.isBeingDragged||(i.iOSNativeScrolling||(i.sliderY=i.sliderTop,i.setOnScrollStyles()),null!=t&&(i.contentScrollTop>=i.maxScrollTop?(i.options.preventPageScrolling&&i.preventScrolling(t,l),i.prevScrollTop!==i.maxScrollTop&&i.$el.trigger("scrollend")):0===i.contentScrollTop&&(i.options.preventPageScrolling&&i.preventScrolling(t,T),0!==i.prevScrollTop&&i.$el.trigger("scrolltop"))))}),wheel:(e=this,function(t){var i;if(null!=t)return(i=t.delta||t.wheelDelta||t.originalEvent&&t.originalEvent.wheelDelta||-t.detail||t.originalEvent&&-t.originalEvent.detail)&&(e.sliderY+=-i/3),e.scroll(),!1}),enter:(t=this,function(e){var i;if(t.isBeingDragged)return 1!==(e.buttons||e.which)?(i=t.events).up.apply(i,arguments):void 0})}},g.prototype.addEvents=function(){var t;this.removeEvents(),t=this.events,this.options.disableResize||this.win.bind(f,t[f]),this.iOSNativeScrolling||(this.slider.bind(c,t[l]),this.pane.bind(c,t[v]).bind(u+" "+n,t[y])),this.$content.bind(S+" "+u+" "+n+" "+m,t[S])},g.prototype.removeEvents=function(){var t;t=this.events,this.win.unbind(f,t[f]),this.iOSNativeScrolling||(this.slider.unbind(),this.pane.unbind()),this.$content.unbind(S+" "+u+" "+n+" "+m,t[S])},g.prototype.generate=function(){var i,s,n,l,r;return l=(s=this.options).paneClass,r=s.sliderClass,s.contentClass,(n=this.$el.children("."+l)).length||n.children("."+r).length||this.$el.append('<div class="'+l+'"><div class="'+r+'" /></div>'),this.pane=this.$el.children("."+l),this.slider=this.pane.find("."+r),0===o&&C()?i={right:-14,paddingRight:+e.getComputedStyle(this.content,null).getPropertyValue("padding-right").replace(/[^0-9.]+/g,"")+14}:o&&(i=t("body").hasClass("rtl")?{left:-o}:{right:-o}),this.$el.addClass(s.enabledClass),null!=i&&this.$content.css(i),this},g.prototype.restore=function(){this.stopped=!1,this.iOSNativeScrolling||this.pane.show(),this.addEvents()},g.prototype.reset=function(){var t,e,i,n,l,r,h,c,a,p,d;if(!this.iOSNativeScrolling){if(this.$el.find("."+this.options.paneClass).length||this.generate().stop(),this.stopped&&this.restore(),l=(n=(t=this.content).style).overflowY,s&&this.$content.css({height:this.$content.height()}),e=t.scrollHeight+o,(a=parseInt(this.$el.css("max-height"),10))>0&&(this.$el.height(""),this.$el.height(t.scrollHeight>a?a:t.scrollHeight)),h=(r=this.pane.outerHeight(!1))+(c=parseInt(this.pane.css("top"),10))+parseInt(this.pane.css("bottom"),10),(d=Math.round(h/e*r))<this.options.sliderMinHeight?d=this.options.sliderMinHeight:null!=this.options.sliderMaxHeight&&d>this.options.sliderMaxHeight&&(d=this.options.sliderMaxHeight),l===S&&n.overflowX!==S&&(d+=o),this.maxSliderTop=h-d,this.contentHeight=e,this.paneHeight=r,this.paneOuterHeight=h,this.sliderHeight=d,this.paneTop=c,this.slider.height(d),this.events.scroll(),this.pane.show(),this.isActive=!0,t.scrollHeight===t.clientHeight||this.pane.outerHeight(!0)>=t.scrollHeight&&l!==S?(this.pane.hide(),this.isActive=!1):this.el.clientHeight===t.scrollHeight&&l===S?this.slider.hide():this.slider.show(),this.pane.css({opacity:this.options.alwaysVisible?1:"",visibility:this.options.alwaysVisible?"visible":""}),"static"===(i=this.$content.css("position"))||"relative"===i){p=parseInt(this.$content.css("right"),10);var u=parseInt(this.$content.css("left"),10);p?this.$content.css({right:"",marginRight:p}):u&&this.$content.css({left:"",marginLeft:u})}return this}this.contentHeight=this.content.scrollHeight},g.prototype.scroll=function(){if(this.isActive)return this.sliderY=Math.max(0,this.sliderY),this.sliderY=Math.min(this.maxSliderTop,this.sliderY),this.$content.scrollTop(this.maxScrollTop*this.sliderY/this.maxSliderTop),this.iOSNativeScrolling||(this.updateScrollValues(),this.setOnScrollStyles()),this},g.prototype.scrollBottom=function(t){if(this.isActive)return this.$content.scrollTop(this.contentHeight-this.$content.height()-t).trigger(u),this.stop().restore(),this},g.prototype.scrollTop=function(t){if(this.isActive)return this.$content.scrollTop(+t).trigger(u),this.stop().restore(),this},g.prototype.scrollTo=function(t){if(this.isActive)return this.scrollTop(this.$el.find(t).get(0).offsetTop),this},g.prototype.stop=function(){return b&&this.scrollRAF&&(b(this.scrollRAF),this.scrollRAF=null),this.stopped=!0,this.removeEvents(),this.iOSNativeScrolling||this.pane.hide(),this},g.prototype.destroy=function(){return this.stopped||this.stop(),!this.iOSNativeScrolling&&this.pane.length&&this.pane.remove(),s&&this.$content.height(""),this.$content.removeAttr("tabindex"),this.$el.hasClass(this.options.enabledClass)&&(this.$el.removeClass(this.options.enabledClass),this.$content.css({right:""})),this},g.prototype.flash=function(){var t;if(!this.iOSNativeScrolling&&this.isActive)return this.reset(),this.pane.addClass(this.options.flashedClass),setTimeout((t=this,function(){t.pane.removeClass(t.options.flashedClass)}),this.options.flashDelay),this},g}(),t.fn.nanoScroller=function(e){return this.each(function(){var i,s;if((s=this.nanoscroller)||(i=t.extend({},w,e),this.nanoscroller=s=new g(this,i)),e&&"object"==typeof e){if(t.extend(s.options,e),null!=e.scrollBottom)return s.scrollBottom(e.scrollBottom);if(null!=e.scrollTop)return s.scrollTop(e.scrollTop);if(e.scrollTo)return s.scrollTo(e.scrollTo);if("bottom"===e.scroll)return s.scrollBottom(0);if("top"===e.scroll)return s.scrollTop(0);if(e.scroll&&e.scroll instanceof t)return s.scrollTo(e.scroll);if(e.stop)return s.stop();if(e.destroy)return s.destroy();if(e.flash)return s.flash()}return s.reset()})},t.fn.nanoScroller.Constructor=g}); //# sourceMappingURL=jquery.nanoscroller.js.map
